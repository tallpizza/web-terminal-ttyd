import{j as S,g as se,k as ue,d as te,f as P,c as D,l as q,a as d,t as z,F as j,h as Q,m as be,v as he,p as de,u as we,o as x,n as W,i as re,q as ge,b as t,r as g,w as e,e as v,s as ee,x as Se,y as xe,z as Ce}from"./index-CqkIdAws.js";import{u as ie}from"./sessions-B6t27kl4.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as ce}from"./settings-Dvok4qSk.js";import{V as Te}from"./VirtualKeyboard-DOPYqG-W.js";function me(h={}){const{swipeThreshold:_=50,longPressDelay:$=500}=h,l=S(0),f=S(0),y=S(0),u=S(0),o=S(0),c=S(0),p=S(!1),C=S(0);let T=null,E=0,K=1,k=null;function Y(r){if(r.touches.length===1)l.value=r.touches[0].clientX,f.value=r.touches[0].clientY,o.value=Date.now(),h.onLongPress&&(T=setTimeout(()=>{h.onLongPress?.(r)},$)),h.onPullToRefresh&&window.scrollY===0&&(p.value=!0);else if(r.touches.length===2&&h.onPinch){const a=r.touches[0].clientX-r.touches[1].clientX,b=r.touches[0].clientY-r.touches[1].clientY;E=Math.sqrt(a*a+b*b)}}function X(r){if(T&&(clearTimeout(T),T=null),r.touches.length===1){if(y.value=r.touches[0].clientX,u.value=r.touches[0].clientY,p.value&&h.onPullToRefresh){const a=u.value-f.value;a>0&&(C.value=Math.min(a,150),r.preventDefault(),k&&(k.style.transform=`translateY(${C.value*.5}px)`,k.style.transition="none"))}}else if(r.touches.length===2&&h.onPinch&&E>0){const a=r.touches[0].clientX-r.touches[1].clientX,b=r.touches[0].clientY-r.touches[1].clientY,F=Math.sqrt(a*a+b*b)/E;Math.abs(F-K)>.01&&(K=F,h.onPinch(F))}}function R(r){T&&(clearTimeout(T),T=null);const a=Date.now(),b=a-o.value;if(h.onDoubleTap){const n=a-c.value;if(n<300&&n>0){h.onDoubleTap(),c.value=0;return}c.value=a}if(p.value&&h.onPullToRefresh){p.value=!1,k&&(k.style.transition="transform 0.3s ease",k.style.transform="translateY(0)"),C.value>80?h.onPullToRefresh().then(()=>{C.value=0}):C.value=0;return}if(b<300){const n=y.value-l.value,F=u.value-f.value,U=Math.abs(n),V=Math.abs(F);(U>_||V>_)&&(U>V?n>_&&h.onSwipeRight?h.onSwipeRight():n<-_&&h.onSwipeLeft&&h.onSwipeLeft():F>_&&h.onSwipeDown?h.onSwipeDown():F<-_&&h.onSwipeUp&&h.onSwipeUp())}E=0,K=1}function I(){T&&(clearTimeout(T),T=null),p.value=!1,C.value=0,E=0,K=1,k&&(k.style.transform="translateY(0)")}function B(r){r.preventDefault()}function A(r){k=r||h.element||document.body,k&&(k.addEventListener("touchstart",Y,{passive:!1}),k.addEventListener("touchmove",X,{passive:!1}),k.addEventListener("touchend",R,{passive:!1}),k.addEventListener("touchcancel",I,{passive:!1}),k.addEventListener("gesturestart",B,{passive:!1}))}function i(){k&&(k.removeEventListener("touchstart",Y),k.removeEventListener("touchmove",X),k.removeEventListener("touchend",R),k.removeEventListener("touchcancel",I),k.removeEventListener("gesturestart",B)),T&&clearTimeout(T)}return se(()=>{!k&&h.element&&A(h.element)}),ue(()=>{i()}),{setup:A,cleanup:i,isPulling:p,pullDistance:C,touchStartX:l,touchStartY:f,touchEndX:y,touchEndY:u}}const $e={class:"session-tabs"},De={key:0,class:"mobile-tabs"},Fe={class:"tab-name"},ze={class:"dropdown-arrow"},Ee={key:0,class:"mobile-dropdown"},Ke=["onClick"],Le={class:"session-name"},Me=["onClick"],Pe=["onClick"],Be=["onDblclick"],Ve=["onClick","title"],Ie={key:2,class:"rename-dialog"},Ne=te({__name:"SessionTabs",setup(h){const _=ie(),$=we(),l=P(()=>_.sessions),f=P(()=>_.activeSessionId),y=P(()=>l.value.find(i=>i.id===f.value)),u=S(null),o=S(""),c=S(),p=S(!1),C=P(()=>window.innerWidth<768||"ontouchstart"in window||navigator.maxTouchPoints>0);async function T(){try{const i=await _.createSession();i&&i.id&&$.push(`/session/${i.id}`)}catch(i){console.error("Failed to create session:",i)}}function E(i){_.switchSession(i),$.push(`/session/${i}`)}function K(i){_.switchSession(i),$.push(`/session/${i}`),p.value=!1}async function k(i){confirm("Close this session?")&&await _.closeSession(i)}async function Y(i){u.value=i,o.value=i.name,await ge(),c.value?.select()}async function X(){u.value&&o.value.trim()&&(await _.renameSession(u.value.id,o.value.trim()),R())}function R(){u.value=null,o.value=""}function I(i){if(i.ctrlKey&&i.shiftKey&&i.key==="T"&&(i.preventDefault(),T()),i.ctrlKey&&i.key==="Tab"&&!i.shiftKey){i.preventDefault();const a=(l.value.findIndex(b=>b.id===f.value)+1)%l.value.length;l.value[a]&&E(l.value[a].id)}if(i.ctrlKey&&i.shiftKey&&i.key==="Tab"){i.preventDefault();const r=l.value.findIndex(b=>b.id===f.value),a=r===0?l.value.length-1:r-1;l.value[a]&&E(l.value[a].id)}i.ctrlKey&&i.key==="w"&&(i.preventDefault(),f.value&&k(f.value))}const B=S(),A=me({onSwipeLeft:()=>{const r=(l.value.findIndex(a=>a.id===f.value)+1)%l.value.length;l.value[r]&&E(l.value[r].id)},onSwipeRight:()=>{const i=l.value.findIndex(a=>a.id===f.value),r=i===0?l.value.length-1:i-1;l.value[r]&&E(l.value[r].id)},swipeThreshold:50});return se(()=>{document.addEventListener("keydown",I),B.value&&A.setup(B.value)}),ue(()=>{document.removeEventListener("keydown",I),A.cleanup()}),(i,r)=>(x(),D("div",$e,[C.value&&l.value.length>2?(x(),D("div",De,[d("div",{class:"mobile-current-tab",onClick:r[0]||(r[0]=a=>p.value=!p.value)},[d("span",Fe,z(y.value?.name||"No Session"),1),d("span",ze,z(p.value?"▲":"▼"),1)]),p.value?(x(),D("div",Ee,[(x(!0),D(j,null,Q(l.value,a=>(x(),D("div",{key:a.id,class:W(["dropdown-item",{active:a.id===f.value}]),onClick:b=>K(a.id)},[d("span",Le,z(a.name),1),d("button",{class:"close-btn",onClick:re(b=>k(a.id),["stop"])}," × ",8,Me)],10,Ke))),128))])):q("",!0),d("button",{class:"mobile-add-btn",onClick:T,title:"New Session"}," + ")])):(x(),D("div",{key:1,class:"tabs-container",ref_key:"tabsContainer",ref:B},[(x(!0),D(j,null,Q(l.value,a=>(x(),D("div",{key:a.id,class:W(["tab",{active:a.id===f.value}]),onClick:b=>E(a.id)},[d("span",{class:"tab-name",onDblclick:b=>Y(a)},z(a.name),41,Be),d("button",{class:"close-btn",onClick:re(b=>k(a.id),["stop"]),title:"Close "+a.name}," × ",8,Ve)],10,Pe))),128)),d("button",{class:"tab add-tab",onClick:T,title:"New Session (Ctrl+Shift+T)"}," + ")],512)),u.value?(x(),D("div",Ie,[be(d("input",{"onUpdate:modelValue":r[1]||(r[1]=a=>o.value=a),onKeyup:[de(X,["enter"]),de(R,["esc"])],ref_key:"renameInput",ref:c,placeholder:"Session name"},null,544),[[he,o.value]])])):q("",!0)]))}}),Re=ne(Ne,[["__scopeId","data-v-0ea7c3fe"]]),Ae={key:0,class:"mobile-bottom-nav"},Ue=te({__name:"MobileBottomNav",emits:["toggle-keyboard","toggle-fullscreen","theme-change","font-size-change"],setup(h,{emit:_}){const $=_,l=ie(),f=ce(),y=S(!1),u=S(!1),o=S(!1),c=S(!1),p=S(!1),C=S(14),T=S("monokai"),E=P(()=>l.sessions),K=P(()=>l.activeSessionId),k=P(()=>window.innerWidth<768||"ontouchstart"in window||navigator.maxTouchPoints>0),Y=[{id:"monokai",name:"Monokai",description:"Dark theme with vibrant colors"},{id:"solarized-dark",name:"Solarized Dark",description:"Popular dark theme"},{id:"solarized-light",name:"Solarized Light",description:"Light theme"},{id:"dracula",name:"Dracula",description:"Dark theme with purple accents"},{id:"gruvbox",name:"Gruvbox",description:"Retro groove dark theme"},{id:"nord",name:"Nord",description:"Arctic, north-bluish theme"}];function X(){$("toggle-keyboard")}function R(){document.fullscreenElement?(document.exitFullscreen(),p.value=!1):(document.documentElement.requestFullscreen(),p.value=!0),$("toggle-fullscreen")}function I(){l.createSession(),u.value=!1}function B(b){l.switchSession(b),u.value=!1}function A(b){confirm("Close this session?")&&l.closeSession(b)}function i(){K.value&&l.reloadSession(K.value),y.value=!1}function r(b){T.value=b.id,f.setSetting("appearance","terminalTheme",b.id),$("theme-change",b),c.value=!1}function a(b){f.setSetting("appearance","fontSize",b),$("font-size-change",b)}return document.addEventListener("fullscreenchange",()=>{p.value=!!document.fullscreenElement}),(b,n)=>{const F=g("v-icon"),U=g("v-card-title"),V=g("v-list-item-title"),O=g("v-list-item"),G=g("v-list"),m=g("v-card"),s=g("v-bottom-sheet"),L=g("v-btn"),N=g("v-slider"),H=g("v-card-text"),oe=g("v-spacer"),J=g("v-card-actions"),Z=g("v-dialog"),ae=g("v-list-item-subtitle");return k.value?(x(),D("div",Ae,[d("div",{class:"nav-item",onClick:X},[t(F,null,{default:e(()=>n[11]||(n[11]=[v("mdi-keyboard",-1)])),_:1,__:[11]}),n[12]||(n[12]=d("span",null,"Keyboard",-1))]),d("div",{class:"nav-item",onClick:R},[t(F,null,{default:e(()=>[v(z(p.value?"mdi-fullscreen-exit":"mdi-fullscreen"),1)]),_:1}),d("span",null,z(p.value?"Exit":"Fullscreen"),1)]),d("div",{class:"nav-item",onClick:n[0]||(n[0]=w=>y.value=!0)},[t(F,null,{default:e(()=>n[13]||(n[13]=[v("mdi-dots-vertical",-1)])),_:1,__:[13]}),n[14]||(n[14]=d("span",null,"More",-1))]),d("div",{class:"nav-item",onClick:I},[t(F,null,{default:e(()=>n[15]||(n[15]=[v("mdi-plus",-1)])),_:1,__:[15]}),n[16]||(n[16]=d("span",null,"New",-1))]),d("div",{class:"nav-item",onClick:n[1]||(n[1]=w=>u.value=!0)},[t(F,null,{default:e(()=>n[17]||(n[17]=[v("mdi-view-list",-1)])),_:1,__:[17]}),n[18]||(n[18]=d("span",null,"Sessions",-1))]),t(s,{modelValue:y.value,"onUpdate:modelValue":n[4]||(n[4]=w=>y.value=w)},{default:e(()=>[t(m,null,{default:e(()=>[t(U,null,{default:e(()=>n[19]||(n[19]=[v("Options",-1)])),_:1,__:[19]}),t(G,null,{default:e(()=>[t(O,{onClick:n[2]||(n[2]=w=>c.value=!0)},{prepend:e(()=>[t(F,null,{default:e(()=>n[20]||(n[20]=[v("mdi-palette",-1)])),_:1,__:[20]})]),default:e(()=>[t(V,null,{default:e(()=>n[21]||(n[21]=[v("Change Theme",-1)])),_:1,__:[21]})]),_:1}),t(O,{onClick:i},{prepend:e(()=>[t(F,null,{default:e(()=>n[22]||(n[22]=[v("mdi-refresh",-1)])),_:1,__:[22]})]),default:e(()=>[t(V,null,{default:e(()=>n[23]||(n[23]=[v("Refresh Terminal",-1)])),_:1,__:[23]})]),_:1}),t(O,{onClick:n[3]||(n[3]=w=>o.value=!0)},{prepend:e(()=>[t(F,null,{default:e(()=>n[24]||(n[24]=[v("mdi-format-size",-1)])),_:1,__:[24]})]),default:e(()=>[t(V,null,{default:e(()=>n[25]||(n[25]=[v("Font Size",-1)])),_:1,__:[25]})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(s,{modelValue:u.value,"onUpdate:modelValue":n[5]||(n[5]=w=>u.value=w)},{default:e(()=>[t(m,null,{default:e(()=>[t(U,null,{default:e(()=>n[26]||(n[26]=[v("Sessions",-1)])),_:1,__:[26]}),t(G,null,{default:e(()=>[(x(!0),D(j,null,Q(E.value,w=>(x(),ee(O,{key:w.id,onClick:le=>B(w.id),active:w.id===K.value},{append:e(()=>[t(L,{icon:"",size:"small",onClick:re(le=>A(w.id),["stop"])},{default:e(()=>[t(F,null,{default:e(()=>n[27]||(n[27]=[v("mdi-close",-1)])),_:1,__:[27]})]),_:2},1032,["onClick"])]),default:e(()=>[t(V,null,{default:e(()=>[v(z(w.name),1)]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Z,{modelValue:o.value,"onUpdate:modelValue":n[8]||(n[8]=w=>o.value=w),"max-width":"300"},{default:e(()=>[t(m,null,{default:e(()=>[t(U,null,{default:e(()=>n[28]||(n[28]=[v("Font Size",-1)])),_:1,__:[28]}),t(H,null,{default:e(()=>[t(N,{modelValue:C.value,"onUpdate:modelValue":[n[6]||(n[6]=w=>C.value=w),a],min:10,max:24,step:2,"thumb-label":""},{append:e(()=>[d("span",null,z(C.value)+"px",1)]),_:1},8,["modelValue"])]),_:1}),t(J,null,{default:e(()=>[t(oe),t(L,{variant:"text",onClick:n[7]||(n[7]=w=>o.value=!1)},{default:e(()=>n[29]||(n[29]=[v("Done",-1)])),_:1,__:[29]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Z,{modelValue:c.value,"onUpdate:modelValue":n[10]||(n[10]=w=>c.value=w),"max-width":"500"},{default:e(()=>[t(m,null,{default:e(()=>[t(U,null,{default:e(()=>n[30]||(n[30]=[v("Select Terminal Theme",-1)])),_:1,__:[30]}),t(H,null,{default:e(()=>[t(G,null,{default:e(()=>[(x(),D(j,null,Q(Y,w=>t(O,{key:w.id,onClick:le=>r(w),active:T.value===w.id},{default:e(()=>[t(V,null,{default:e(()=>[v(z(w.name),1)]),_:2},1024),t(ae,null,{default:e(()=>[v(z(w.description),1)]),_:2},1024)]),_:2},1032,["onClick","active"])),64))]),_:1})]),_:1}),t(J,null,{default:e(()=>[t(oe),t(L,{variant:"text",onClick:n[9]||(n[9]=w=>c.value=!1)},{default:e(()=>n[31]||(n[31]=[v("Close",-1)])),_:1,__:[31]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):q("",!0)}}}),qe=ne(Ue,[["__scopeId","data-v-07a1a67b"]]),Ye={key:1,class:"mobile-header"},Xe=["src"],Oe={key:3,class:"no-session"},We=te({__name:"TerminalFrame",props:{session:{}},setup(h){const _=h,$=ie(),l=ce(),f=S(),y=S(!1),u=S(!1),o=S(1),c=S(!1),p=S(14),C=S("monokai"),T=[{id:"monokai",name:"Monokai",description:"Dark theme with vibrant colors"},{id:"solarized-dark",name:"Solarized Dark",description:"Popular dark theme"},{id:"solarized-light",name:"Solarized Light",description:"Light theme with good contrast"},{id:"dracula",name:"Dracula",description:"Dark theme with purple accents"},{id:"gruvbox",name:"Gruvbox",description:"Retro groove dark theme"},{id:"nord",name:"Nord",description:"Arctic, north-bluish theme"},{id:"one-dark",name:"One Dark",description:"Atom One Dark theme"},{id:"material",name:"Material",description:"Material Design theme"},{id:"tomorrow-night",name:"Tomorrow Night",description:"Tomorrow Night theme"},{id:"ayu",name:"Ayu",description:"Modern theme with vibrant colors"},{id:"tokyo-night",name:"Tokyo Night",description:"Clean, dark theme"},{id:"catppuccin",name:"Catppuccin",description:"Soothing pastel theme"}],E=P(()=>_.session?$.getSessionUrl(_.session.id):""),K=P(()=>"ontouchstart"in window||navigator.maxTouchPoints>0),k=P(()=>_.session?_.session.status==="active"?"success":"error":"grey"),Y=P(()=>({fontSize:`${p.value}px`,transform:`scale(${o.value})`,transformOrigin:"top left"}));function X(){console.log("Terminal iframe loaded for session:",_.session?.id),V(),setTimeout(()=>{b(),a()},1e3)}function R(){$.createSession()}function I(){y.value=!y.value}function B(){document.fullscreenElement?(document.exitFullscreen(),c.value=!1):(f.value?.requestFullscreen(),c.value=!0)}function A(){p.value<24&&(p.value+=2,l.setSetting("appearance","fontSize",p.value),a())}function i(){p.value>10&&(p.value-=2,l.setSetting("appearance","fontSize",p.value),a())}function r(m){C.value=m.id,l.setSetting("appearance","terminalTheme",m.id),b(),u.value=!1}function a(){const m=f.value?.querySelector("iframe");if(m&&m.contentDocument){const s=m.contentDocument.createElement("style");s.textContent=`.terminal { font-size: ${p.value}px !important; }`,m.contentDocument.head.appendChild(s)}}function b(){const m=f.value?.querySelector("iframe");if(m&&m.contentDocument){let s=m.contentDocument.querySelector("#terminal-width-style");s||(s=m.contentDocument.createElement("style"),s.id="terminal-width-style",m.contentDocument.head.appendChild(s)),s.textContent=`
      body { 
        margin: 0 !important;
        padding: 0 !important;
        width: 100% !important;
        height: 100% !important;
        overflow: hidden !important;
        background: #000 !important;
      }
      .terminal, #terminal { 
        width: 100% !important; 
        height: 100% !important;
        margin: 0 !important;
        padding: 8px !important;
        background: #000 !important;
        font-family: 'Menlo', 'Monaco', 'Courier New', monospace !important;
        font-size: 14px !important;
        line-height: 1.2 !important;
      }
      .xterm, .xterm-screen { 
        width: 100% !important; 
        height: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      .xterm-viewport {
        width: 100% !important;
        overflow-y: auto !important;
      }
      .xterm-rows {
        width: 100% !important;
      }
      .xterm-cursor {
        background: #fff !important;
      }
    `;const L=m.contentDocument.querySelector(".terminal, #terminal");L&&(L.style.width="100vw",L.style.maxWidth="100vw",L.style.margin="0",L.style.padding="0"),console.log("Applied theme and full width styles:",C.value)}}function n(){_.session&&$.reloadSession(_.session.id)}function F(m){const s=f.value?.querySelector("iframe");s&&s.contentWindow&&s.contentWindow.postMessage({type:"keypress",key:m.key,code:m.code,ctrlKey:m.ctrlKey,altKey:m.altKey,shiftKey:m.shiftKey,metaKey:m.metaKey},"*")}const U=me({onPinch:m=>{f.value?.querySelector("iframe")&&(o.value=Math.min(Math.max(.5,o.value*m),3))},onDoubleTap:()=>{o.value=1},onLongPress:m=>{O()},onPullToRefresh:async()=>{_.session&&await $.reloadSession(_.session.id)}});function V(){!f.value||!K.value||U.setup(f.value)}function O(m){console.log("Long press detected - would show context menu")}Se(()=>_.session,()=>{_.session&&(o.value=1)});function G(){const m=f.value?.querySelector("iframe");m&&(m.style.height="0",setTimeout(()=>{m.style.height="100%"},0))}return se(()=>{window.addEventListener("resize",G),V(),p.value=l.getSetting("appearance","fontSize"),C.value=l.getSetting("appearance","terminalTheme"),document.addEventListener("fullscreenchange",()=>{c.value=!!document.fullscreenElement})}),ue(()=>{window.removeEventListener("resize",G)}),(m,s)=>{const L=g("v-tooltip"),N=g("v-btn"),H=g("v-chip"),oe=g("v-btn-group"),J=g("v-spacer"),Z=g("v-icon"),ae=g("v-card-title"),w=g("v-list-item-title"),le=g("v-list-item-subtitle"),ve=g("v-list-item"),fe=g("v-list"),pe=g("v-card-text"),_e=g("v-card-actions"),ye=g("v-card"),ke=g("v-dialog");return x(),D("div",{class:W(["terminal-frame",{fullscreen:c.value}]),ref_key:"terminalContainer",ref:f},[K.value?q("",!0):(x(),D("div",{key:0,class:W(["terminal-toolbar",{"mobile-toolbar":K.value}])},[t(oe,{density:"compact",variant:"outlined"},{default:e(()=>[t(N,{onClick:B,icon:c.value?"mdi-fullscreen-exit":"mdi-fullscreen",size:"small"},{default:e(()=>[t(L,{activator:"parent",location:"bottom"},{default:e(()=>[v(z(c.value?"Exit Fullscreen":"Fullscreen"),1)]),_:1})]),_:1},8,["icon"]),t(N,{onClick:s[0]||(s[0]=M=>u.value=!0),icon:"mdi-palette",size:"small"},{default:e(()=>[t(L,{activator:"parent",location:"bottom"},{default:e(()=>s[5]||(s[5]=[v("Theme",-1)])),_:1,__:[5]})]),_:1}),t(N,{onClick:i,icon:"mdi-minus",disabled:p.value<=10,size:"small"},{default:e(()=>[t(L,{activator:"parent",location:"bottom"},{default:e(()=>s[6]||(s[6]=[v("Decrease Font",-1)])),_:1,__:[6]})]),_:1},8,["disabled"]),t(H,{size:"small",class:"mx-1"},{default:e(()=>[v(z(p.value)+"px",1)]),_:1}),t(N,{onClick:A,icon:"mdi-plus",disabled:p.value>=24,size:"small"},{default:e(()=>[t(L,{activator:"parent",location:"bottom"},{default:e(()=>s[7]||(s[7]=[v("Increase Font",-1)])),_:1,__:[7]})]),_:1},8,["disabled"]),t(N,{onClick:n,icon:"mdi-refresh",size:"small"},{default:e(()=>[t(L,{activator:"parent",location:"bottom"},{default:e(()=>s[8]||(s[8]=[v("Refresh",-1)])),_:1,__:[8]})]),_:1})]),_:1}),t(J),t(H,{size:"small",color:k.value},{default:e(()=>[v(z(m.session?.name||"No Session"),1)]),_:1},8,["color"])],2)),K.value?(x(),D("div",Ye,[t(H,{size:"small",color:k.value},{default:e(()=>[v(z(m.session?.name||"No Session"),1)]),_:1},8,["color"])])):q("",!0),E.value&&m.session?(x(),D("iframe",{src:E.value,key:m.session.id,class:W(["gotty-iframe",{[`theme-${C.value}`]:!0}]),style:xe(Y.value),onLoad:X,allow:"clipboard-write",frameborder:"0"},null,46,Xe)):(x(),D("div",Oe,[t(Z,{size:"64",color:"grey"},{default:e(()=>s[9]||(s[9]=[v("mdi-console",-1)])),_:1,__:[9]}),s[11]||(s[11]=d("p",null,"No session selected",-1)),t(N,{color:"primary",onClick:R},{default:e(()=>s[10]||(s[10]=[v(" Create New Session ",-1)])),_:1,__:[10]})])),K.value&&!y.value?(x(),ee(N,{key:4,class:"keyboard-toggle",fab:"",color:"primary",onClick:I,icon:"mdi-keyboard"},{default:e(()=>[t(L,{activator:"parent",location:"top"},{default:e(()=>s[12]||(s[12]=[v("Show Keyboard",-1)])),_:1,__:[12]})]),_:1})):q("",!0),y.value?(x(),ee(Te,{key:5,onKeypress:F,onClose:s[1]||(s[1]=M=>y.value=!1)})):q("",!0),t(ke,{modelValue:u.value,"onUpdate:modelValue":s[3]||(s[3]=M=>u.value=M),"max-width":"500"},{default:e(()=>[t(ye,null,{default:e(()=>[t(ae,null,{default:e(()=>s[13]||(s[13]=[v("Select Terminal Theme",-1)])),_:1,__:[13]}),t(pe,null,{default:e(()=>[t(fe,null,{default:e(()=>[(x(),D(j,null,Q(T,M=>t(ve,{key:M.id,onClick:rt=>r(M),active:C.value===M.id},{append:e(()=>[C.value===M.id?(x(),ee(Z,{key:0,color:"primary"},{default:e(()=>s[14]||(s[14]=[v(" mdi-check ",-1)])),_:1,__:[14]})):q("",!0)]),default:e(()=>[t(w,null,{default:e(()=>[v(z(M.name),1)]),_:2},1024),t(le,null,{default:e(()=>[v(z(M.description),1)]),_:2},1024)]),_:2},1032,["onClick","active"])),64))]),_:1})]),_:1}),t(_e,null,{default:e(()=>[t(J),t(N,{variant:"text",onClick:s[2]||(s[2]=M=>u.value=!1)},{default:e(()=>s[15]||(s[15]=[v("Close",-1)])),_:1,__:[15]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(qe,{onToggleKeyboard:I,onToggleFullscreen:B,onThemeChange:r,onFontSizeChange:s[4]||(s[4]=M=>{p.value=M,a()})})],2)}}}),Ge=ne(We,[["__scopeId","data-v-ca50d39f"]]),He={class:"simple-keyboard"},je={class:"keyboard-container"},Qe={class:"keyboard-row"},Je={class:"keyboard-row arrow-section"},Ze={class:"arrow-cluster"},et={class:"arrow-bottom"},tt={class:"nav-keys"},nt={class:"keyboard-row"},ot=["onClick"],lt=te({__name:"SimpleKeyboard",emits:["key-press"],setup(h,{emit:_}){const $=_,l=S({ctrl:!1,alt:!1,shift:!1});function f(u){l.value[u]=!l.value[u]}function y(u){const o={key:u,code:u,ctrlKey:l.value.ctrl,altKey:l.value.alt,shiftKey:l.value.shift,metaKey:!1};$("key-press",o),(l.value.ctrl||l.value.alt)&&setTimeout(()=>{l.value.ctrl=!1,l.value.alt=!1},100)}return(u,o)=>(x(),D("div",He,[d("div",je,[d("div",Qe,[d("button",{onClick:o[0]||(o[0]=c=>y("Escape")),class:"key-button"},"ESC"),d("button",{onClick:o[1]||(o[1]=c=>y("Tab")),class:"key-button"},"TAB"),d("button",{onClick:o[2]||(o[2]=c=>f("ctrl")),class:W(["key-button",{active:l.value.ctrl}])},"CTRL",2),d("button",{onClick:o[3]||(o[3]=c=>f("alt")),class:W(["key-button",{active:l.value.alt}])},"ALT",2),d("button",{onClick:o[4]||(o[4]=c=>y("Enter")),class:"key-button"},"ENTER")]),d("div",Je,[d("div",Ze,[d("button",{onClick:o[5]||(o[5]=c=>y("ArrowUp")),class:"key-button arrow"},"↑"),d("div",et,[d("button",{onClick:o[6]||(o[6]=c=>y("ArrowLeft")),class:"key-button arrow"},"←"),d("button",{onClick:o[7]||(o[7]=c=>y("ArrowDown")),class:"key-button arrow"},"↓"),d("button",{onClick:o[8]||(o[8]=c=>y("ArrowRight")),class:"key-button arrow"},"→")])]),d("div",tt,[d("button",{onClick:o[9]||(o[9]=c=>y("Home")),class:"key-button small"},"Home"),d("button",{onClick:o[10]||(o[10]=c=>y("End")),class:"key-button small"},"End"),d("button",{onClick:o[11]||(o[11]=c=>y("PageUp")),class:"key-button small"},"PgUp"),d("button",{onClick:o[12]||(o[12]=c=>y("PageDown")),class:"key-button small"},"PgDn")])]),d("div",nt,[(x(),D(j,null,Q(12,c=>d("button",{key:`f${c}`,onClick:p=>y(`F${c}`),class:"key-button fn-key"},"F"+z(c),9,ot)),64))])])]))}}),st=ne(lt,[["__scopeId","data-v-28e641c1"]]),it={class:"session-view"},at=te({__name:"SessionView",setup(h){const _=Ce(),$=ie(),l=S(null),f=P(()=>{const u=_.params.id;return $.sessions.find(o=>o.id===u)});se(async()=>{await $.fetchSessions();const u=_.params.id;u&&await $.setActiveSession(u)});function y(u){if(!f.value)return;const o=document.querySelector(".gotty-iframe");if(!(!o||!o.contentWindow))try{const c=o.contentDocument||o.contentWindow.document;if(c.querySelector(".xterm-helper-textarea")||c.querySelector("textarea")||c.activeElement){let C=u.key;const T={Enter:"\r",Tab:"	",Escape:"\x1B",ArrowUp:"\x1B[A",ArrowDown:"\x1B[B",ArrowRight:"\x1B[C",ArrowLeft:"\x1B[D",Home:"\x1B[H",End:"\x1B[F",PageUp:"\x1B[5~",PageDown:"\x1B[6~",F1:"\x1BOP",F2:"\x1BOQ",F3:"\x1BOR",F4:"\x1BOS",F5:"\x1B[15~",F6:"\x1B[17~",F7:"\x1B[18~",F8:"\x1B[19~",F9:"\x1B[20~",F10:"\x1B[21~",F11:"\x1B[23~",F12:"\x1B[24~"};u.ctrlKey&&u.key.length===1?C=String.fromCharCode(u.key.toUpperCase().charCodeAt(0)-64):T[u.key]&&(C=T[u.key]),o.contentWindow.postMessage({type:"input",data:C},"*")}}catch(c){console.error("Error sending key to terminal:",c),$.sendKeyToSession(f.value.id,u)}}return(u,o)=>(x(),D("div",it,[t(Re),f.value?(x(),ee(Ge,{key:0,session:f.value,ref_key:"terminalFrame",ref:l},null,8,["session"])):q("",!0),t(st,{onKeyPress:y})]))}}),ft=ne(at,[["__scopeId","data-v-7cb267ab"]]);export{ft as default};
